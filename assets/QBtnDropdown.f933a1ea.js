import{c as E,b as _,j as Qe,f as je,d as Ge,u as Ne,k as Ke,Q as Se,l as Xe,m as Ye,h as Ue,n as Ee,e as ee,o as Je}from"./QBtn.2d6494c4.js";import{U as g,ad as w,bH as Ze,bI as A,bs as et,bJ as tt,bC as M,bK as te,bG as Q,bE as z,bF as j,bD as F,bz as R,k as C,aa as I,t as O,bL as Be,bB as Te,am as nt,aZ as B,at as Pe,ap as ie,bt as ae,b7 as ot,bA as at}from"./index.86051225.js";import{c as re,a as ue,m as lt,n as it,p as he,k as rt,u as ut,o as _e,b as st,q as ct,d as dt,r as ft,e as vt,s as ht,t as mt,v as gt,w as me,h as bt,x as pt,y as yt,z as xt,Q as wt,A as Ct}from"./uid.36d1700a.js";var Kt=E({name:"QToolbarTitle",props:{shrink:Boolean},setup(e,{slots:n}){const o=g(()=>"q-toolbar__title ellipsis"+(e.shrink===!0?" col-shrink":""));return()=>w("div",{class:o.value},_(n.default))}}),Xt=E({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:n}){const o=g(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>w("div",{class:o.value,role:"toolbar"},_(n.default))}});const se={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},kt=Object.keys(se);se.all=!0;function ge(e){const n={};for(const o of kt)e[o]===!0&&(n[o]=!0);return Object.keys(n).length===0?se:(n.horizontal===!0?n.left=n.right=!0:n.left===!0&&n.right===!0&&(n.horizontal=!0),n.vertical===!0?n.up=n.down=!0:n.up===!0&&n.down===!0&&(n.vertical=!0),n.horizontal===!0&&n.vertical===!0&&(n.all=!0),n)}function be(e,n){return n.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof n.handler=="function"&&e.target.nodeName.toUpperCase()!=="INPUT"&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(n.uid)===-1)}function De(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),Ze.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}function ne(e,n,o){const l=j(e);let t,a=l.left-n.event.x,i=l.top-n.event.y,s=Math.abs(a),c=Math.abs(i);const r=n.direction;r.horizontal===!0&&r.vertical!==!0?t=a<0?"left":"right":r.horizontal!==!0&&r.vertical===!0?t=i<0?"up":"down":r.up===!0&&i<0?(t="up",s>c&&(r.left===!0&&a<0?t="left":r.right===!0&&a>0&&(t="right"))):r.down===!0&&i>0?(t="down",s>c&&(r.left===!0&&a<0?t="left":r.right===!0&&a>0&&(t="right"))):r.left===!0&&a<0?(t="left",s<c&&(r.up===!0&&i<0?t="up":r.down===!0&&i>0&&(t="down"))):r.right===!0&&a>0&&(t="right",s<c&&(r.up===!0&&i<0?t="up":r.down===!0&&i>0&&(t="down")));let d=!1;if(t===void 0&&o===!1){if(n.event.isFirst===!0||n.event.lastDir===void 0)return{};t=n.event.lastDir,d=!0,t==="left"||t==="right"?(l.left-=a,s=0,a=0):(l.top-=i,c=0,i=0)}return{synthetic:d,payload:{evt:e,touch:n.event.mouse!==!0,mouse:n.event.mouse===!0,position:l,direction:t,isFirst:n.event.isFirst,isFinal:o===!0,duration:Date.now()-n.event.time,distance:{x:s,y:c},offset:{x:a,y:i},delta:{x:l.left-n.event.lastX,y:l.top-n.event.lastY}}}}let qt=0;var Yt=Qe({name:"touch-pan",beforeMount(e,{value:n,modifiers:o}){if(o.mouse!==!0&&A.has.touch!==!0)return;function l(a,i){o.mouse===!0&&i===!0?R(a):(o.stop===!0&&z(a),o.prevent===!0&&Q(a))}const t={uid:"qvtp_"+qt++,handler:n,modifiers:o,direction:ge(o),noop:et,mouseStart(a){be(a,t)&&tt(a)&&(M(t,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),t.start(a,!0))},touchStart(a){if(be(a,t)){const i=a.target;M(t,"temp",[[i,"touchmove","move","notPassiveCapture"],[i,"touchcancel","end","passiveCapture"],[i,"touchend","end","passiveCapture"]]),t.start(a)}},start(a,i){if(A.is.firefox===!0&&te(e,!0),t.lastEvt=a,i===!0||o.stop===!0){if(t.direction.all!==!0&&(i!==!0||t.modifiers.mouseAllDir!==!0&&t.modifiers.mousealldir!==!0)){const r=a.type.indexOf("mouse")>-1?new MouseEvent(a.type,a):new TouchEvent(a.type,a);a.defaultPrevented===!0&&Q(r),a.cancelBubble===!0&&z(r),Object.assign(r,{qKeyEvent:a.qKeyEvent,qClickOutside:a.qClickOutside,qAnchorHandled:a.qAnchorHandled,qClonedBy:a.qClonedBy===void 0?[t.uid]:a.qClonedBy.concat(t.uid)}),t.initialEvent={target:a.target,event:r}}z(a)}const{left:s,top:c}=j(a);t.event={x:s,y:c,time:Date.now(),mouse:i===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:s,lastY:c}},move(a){if(t.event===void 0)return;const i=j(a),s=i.left-t.event.x,c=i.top-t.event.y;if(s===0&&c===0)return;t.lastEvt=a;const r=t.event.mouse===!0,d=()=>{l(a,r);let u;o.preserveCursor!==!0&&o.preservecursor!==!0&&(u=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),r===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),De(),t.styleCleanup=v=>{if(t.styleCleanup=void 0,u!==void 0&&(document.documentElement.style.cursor=u),document.body.classList.remove("non-selectable"),r===!0){const y=()=>{document.body.classList.remove("no-pointer-events--children")};v!==void 0?setTimeout(()=>{y(),v()},50):y()}else v!==void 0&&v()}};if(t.event.detected===!0){t.event.isFirst!==!0&&l(a,t.event.mouse);const{payload:u,synthetic:v}=ne(a,t,!1);u!==void 0&&(t.handler(u)===!1?t.end(a):(t.styleCleanup===void 0&&t.event.isFirst===!0&&d(),t.event.lastX=u.position.left,t.event.lastY=u.position.top,t.event.lastDir=v===!0?void 0:u.direction,t.event.isFirst=!1));return}if(t.direction.all===!0||r===!0&&(t.modifiers.mouseAllDir===!0||t.modifiers.mousealldir===!0)){d(),t.event.detected=!0,t.move(a);return}const f=Math.abs(s),b=Math.abs(c);f!==b&&(t.direction.horizontal===!0&&f>b||t.direction.vertical===!0&&f<b||t.direction.up===!0&&f<b&&c<0||t.direction.down===!0&&f<b&&c>0||t.direction.left===!0&&f>b&&s<0||t.direction.right===!0&&f>b&&s>0?(t.event.detected=!0,t.move(a)):t.end(a,!0))},end(a,i){if(t.event!==void 0){if(F(t,"temp"),A.is.firefox===!0&&te(e,!1),i===!0)t.styleCleanup!==void 0&&t.styleCleanup(),t.event.detected!==!0&&t.initialEvent!==void 0&&t.initialEvent.target.dispatchEvent(t.initialEvent.event);else if(t.event.detected===!0){t.event.isFirst===!0&&t.handler(ne(a===void 0?t.lastEvt:a,t).payload);const{payload:s}=ne(a===void 0?t.lastEvt:a,t,!0),c=()=>{t.handler(s)};t.styleCleanup!==void 0?t.styleCleanup(c):c()}t.event=void 0,t.initialEvent=void 0,t.lastEvt=void 0}}};if(e.__qtouchpan=t,o.mouse===!0){const a=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";M(t,"main",[[e,"mousedown","mouseStart",`passive${a}`]])}A.has.touch===!0&&M(t,"main",[[e,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,n){const o=e.__qtouchpan;o!==void 0&&(n.oldValue!==n.value&&(typeof value!="function"&&o.end(),o.handler=n.value),o.direction=ge(n.modifiers))},beforeUnmount(e){const n=e.__qtouchpan;n!==void 0&&(n.event!==void 0&&n.end(),F(n,"main"),F(n,"temp"),A.is.firefox===!0&&te(e,!1),n.styleCleanup!==void 0&&n.styleCleanup(),delete e.__qtouchpan)}});function Ut(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Jt(e,n,o){return o<=n?n:Math.min(o,Math.max(n,e))}function Zt(e,n,o){if(o<=n)return n;const l=o-n+1;let t=n+(e-n)%l;return t<n&&(t=l+t),t===0?0:t}function en(e,n=2,o="0"){if(e==null)return e;const l=""+e;return l.length>=n?l:new Array(n-l.length+1).join(o)+l}function St(e,n){const o=C(null),l=g(()=>e.disable===!0?null:w("span",{ref:o,class:"no-outline",tabindex:-1}));function t(a){const i=n.value;a!==void 0&&a.type.indexOf("key")===0?i!==null&&document.activeElement!==i&&i.contains(document.activeElement)===!0&&i.focus():o.value!==null&&(a===void 0||i!==null&&i.contains(a.target)===!0)&&o.value.focus()}return{refocusTargetEl:l,refocusTarget:t}}var Et={xs:30,sm:35,md:40,lg:50,xl:60};const Bt={...ue,...Ne,...lt,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:e=>e==="tf"||e==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},Tt=["update:modelValue"];function Pt(e,n){const{props:o,slots:l,emit:t,proxy:a}=I(),{$q:i}=a,s=re(o,i),c=C(null),{refocusTargetEl:r,refocusTarget:d}=St(o,c),f=je(o,Et),b=g(()=>o.val!==void 0&&Array.isArray(o.modelValue)),u=g(()=>{const p=O(o.val);return b.value===!0?o.modelValue.findIndex(q=>O(q)===p):-1}),v=g(()=>b.value===!0?u.value>-1:O(o.modelValue)===O(o.trueValue)),y=g(()=>b.value===!0?u.value===-1:O(o.modelValue)===O(o.falseValue)),k=g(()=>v.value===!1&&y.value===!1),T=g(()=>o.disable===!0?-1:o.tabindex||0),P=g(()=>`q-${e} cursor-pointer no-outline row inline no-wrap items-center`+(o.disable===!0?" disabled":"")+(s.value===!0?` q-${e}--dark`:"")+(o.dense===!0?` q-${e}--dense`:"")+(o.leftLabel===!0?" reverse":"")),x=g(()=>{const p=v.value===!0?"truthy":y.value===!0?"falsy":"indet",q=o.color!==void 0&&(o.keepColor===!0||(e==="toggle"?v.value===!0:y.value!==!0))?` text-${o.color}`:"";return`q-${e}__inner relative-position non-selectable q-${e}__inner--${p}${q}`}),m=g(()=>{const p={type:"checkbox"};return o.name!==void 0&&Object.assign(p,{".checked":v.value,"^checked":v.value===!0?"checked":void 0,name:o.name,value:b.value===!0?o.val:o.trueValue}),p}),K=it(m),X=g(()=>{const p={tabindex:T.value,role:e==="toggle"?"switch":"checkbox","aria-label":o.label,"aria-checked":k.value===!0?"mixed":v.value===!0?"true":"false"};return o.disable===!0&&(p["aria-disabled"]="true"),p});function S(p){p!==void 0&&(R(p),d(p)),o.disable!==!0&&t("update:modelValue",Y(),p)}function Y(){if(b.value===!0){if(v.value===!0){const p=o.modelValue.slice();return p.splice(u.value,1),p}return o.modelValue.concat([o.val])}if(v.value===!0){if(o.toggleOrder!=="ft"||o.toggleIndeterminate===!1)return o.falseValue}else if(y.value===!0){if(o.toggleOrder==="ft"||o.toggleIndeterminate===!1)return o.trueValue}else return o.toggleOrder!=="ft"?o.trueValue:o.falseValue;return o.indeterminateValue}function W(p){(p.keyCode===13||p.keyCode===32)&&R(p)}function L(p){(p.keyCode===13||p.keyCode===32)&&S(p)}const $=n(v,k);return Object.assign(a,{toggle:S}),()=>{const p=$();o.disable!==!0&&K(p,"unshift",` q-${e}__native absolute q-ma-none q-pa-none`);const q=[w("div",{class:x.value,style:f.value,"aria-hidden":"true"},p)];r.value!==null&&q.push(r.value);const H=o.label!==void 0?Ge(l.default,[o.label]):_(l.default);return H!==void 0&&q.push(w("div",{class:`q-${e}__label q-anchor--skip`},H)),w("div",{ref:c,class:P.value,...X.value,onClick:S,onKeydown:W,onKeyup:L},q)}}function _t(e,n){const o=[],l=JSON.parse(e.VendorCalendarPathJson);return n.forEach(t=>{t.children.forEach(a=>{a.SyncFromCalendars.forEach(i=>{if(e.Vendor==i.Vendor){const s=JSON.parse(i.VendorCalendarPathJson);(e.Vendor=="google"&&l.GoogleAccountId==s.GoogleAccountId&&l.GoogleCalendarId==s.GoogleCalendarId||e.Vendor=="kaboome")&&o.push({GoogleCalendarPath:{GoogleAccountId:t.label.substring(7),GoogleCalendarId:a.label},SyncType:i.SyncType,ManuallyEdited:!1})}})})}),o}function Dt(e,n,o){var s,c,r,d;const l=e.doc._id.split("-")[0],t=_t({Vendor:l,VendorCalendarPathJson:l=="kaboome"?"null":JSON.stringify(e.doc.ReadWriteExternalEvent.GoogleCalendarPath)},n);let a=!1;const i=o.extendedProps.WriteOnlyExternalEvents;for(let f=0;f<i.length;f++){let b=!1;for(let u=0;u<t.length;u++){const v=t[u];if(((s=v.GoogleCalendarPath)==null?void 0:s.GoogleAccountId)==((c=i[f].GoogleCalendarPath)==null?void 0:c.GoogleAccountId)&&((r=v.GoogleCalendarPath)==null?void 0:r.GoogleCalendarId)==((d=i[f].GoogleCalendarPath)==null?void 0:d.GoogleCalendarId)){!i[f].ManuallyEdited&&v.SyncType!=i[f].SyncType&&(i[f]=v,a=!0),t.splice(u,1),b=!0;break}}b||(i.splice(f,1),a=!0,f--)}for(const f of t)i.push(f),a=!0;return a}function Ot(e){return"DTSTART:"+new Date(e).toISOString().replace(/[-:]/g,"").replace(/\..+/,`Z
`)}function At(e){var o,l,t,a,i,s;const n=e.RRule?Ot(e.StartTimestamp)+e.RRule:null;return{id:e._id,title:e.Title,start:e.StartTimestamp,end:e.EndTimestamp,duration:e.EndTimestamp-e.StartTimestamp,rrule:n,exdate:((l=(o=e.ExDates)==null?void 0:o.length)!=null?l:0)==0?null:(t=e.ExDates)==null?void 0:t.map(c=>new Date(c).toISOString()),extendedProps:{description:e.Description,ReadWriteExternalEvent:e.ReadWriteExternalEvent,WriteOnlyExternalEvents:e.WriteOnlyExternalEvents,eventType:(a=e.eventType)!=null?a:"Event",isDone:(i=e.isDone)!=null?i:!1,rev:e._rev,rrule:n,exdates:(s=e.ExDates)!=null?s:[]},backgroundColor:e.isDone?"#21BA45":"#1976d2"}}function pe(e){var n,o,l,t,a,i,s,c,r,d;return{_id:e.id,_rev:(n=e.extendedProps)==null?void 0:n.rev,Title:e.title,StartTimestamp:Number(e.start),EndTimestamp:Number(e.end),Description:(o=e.extendedProps)==null?void 0:o.description,ReadWriteExternalEvent:(l=e.extendedProps)==null?void 0:l.ReadWriteExternalEvent,WriteOnlyExternalEvents:(t=e.extendedProps)==null?void 0:t.WriteOnlyExternalEvents,eventType:(a=e.extendedProps)==null?void 0:a.eventType,isDone:(i=e.extendedProps)==null?void 0:i.isDone,RRule:(c=(s=e.extendedProps)==null?void 0:s.rrule)==null?void 0:c.split(`
`)[1],ExDates:(d=(r=e.extendedProps)==null?void 0:r.exdates)==null?void 0:d.map(f=>Number(f))}}const tn=Be("calendar",{id:"calendar",state:()=>({calendarDb:null,syncing:!1}),actions:{events:async function(e){const n=[],o=this;return await this.calendarDb.allDocs({include_docs:!0,descending:!0},function(l,t){t.rows.forEach(a=>{const i=At(a.doc);e!=null&&e.length>0&&Dt(a,e,i)&&o.put(i),n.push(i)})}),n},registerChangesHandler(e){this.calendarDb.changes({since:"now",live:!0,include_docs:!0}).on("change",()=>{e()})},activateSync(e){const n=`kaboome_${e}`;PouchDB.sync(document.location.origin+n,n,{live:!0},()=>{}).on("denied",function(){this.syncing=!1}).on("error",function(){this.syncing=!1}),this.syncing=!0,this.calendarDb=new PouchDB(n)},put(e){const n=pe(e);this.calendarDb.put(n)},delete(e){const n=pe(e);this.calendarDb.remove(n)}}}),Oe={target:{default:!0},noParentEvent:Boolean,contextMenu:Boolean};function Ae({showing:e,avoidEmit:n,configureAnchorEl:o}){const{props:l,proxy:t,emit:a}=I(),i=C(null);let s=null;function c(u){return i.value===null?!1:u===void 0||u.touches===void 0||u.touches.length<=1}const r={};o===void 0&&(Object.assign(r,{hide(u){t.hide(u)},toggle(u){t.toggle(u),u.qAnchorHandled=!0},toggleKey(u){Te(u,13)===!0&&r.toggle(u)},contextClick(u){t.hide(u),Q(u),nt(()=>{t.show(u),u.qAnchorHandled=!0})},prevent:Q,mobileTouch(u){if(r.mobileCleanup(u),c(u)!==!0)return;t.hide(u),i.value.classList.add("non-selectable");const v=u.target;M(r,"anchor",[[v,"touchmove","mobileCleanup","passive"],[v,"touchend","mobileCleanup","passive"],[v,"touchcancel","mobileCleanup","passive"],[i.value,"contextmenu","prevent","notPassive"]]),s=setTimeout(()=>{s=null,t.show(u),u.qAnchorHandled=!0},300)},mobileCleanup(u){i.value.classList.remove("non-selectable"),s!==null&&(clearTimeout(s),s=null),e.value===!0&&u!==void 0&&De()}}),o=function(u=l.contextMenu){if(l.noParentEvent===!0||i.value===null)return;let v;u===!0?t.$q.platform.is.mobile===!0?v=[[i.value,"touchstart","mobileTouch","passive"]]:v=[[i.value,"mousedown","hide","passive"],[i.value,"contextmenu","contextClick","notPassive"]]:v=[[i.value,"click","toggle","passive"],[i.value,"keyup","toggleKey","passive"]],M(r,"anchor",v)});function d(){F(r,"anchor")}function f(u){for(i.value=u;i.value.classList.contains("q-anchor--skip");)i.value=i.value.parentNode;o()}function b(){if(l.target===!1||l.target===""||t.$el.parentNode===null)i.value=null;else if(l.target===!0)f(t.$el.parentNode);else{let u=l.target;if(typeof l.target=="string")try{u=document.querySelector(l.target)}catch{u=void 0}u!=null?(i.value=u.$el||u,o()):(i.value=null,console.error(`Anchor: target "${l.target}" not found`))}}return B(()=>l.contextMenu,u=>{i.value!==null&&(d(),o(u))}),B(()=>l.target,()=>{i.value!==null&&d(),b()}),B(()=>l.noParentEvent,u=>{i.value!==null&&(u===!0?d():o())}),Pe(()=>{b(),n!==!0&&l.modelValue===!0&&i.value===null&&a("update:modelValue",!1)}),ie(()=>{s!==null&&clearTimeout(s),d()}),{anchorEl:i,canShow:c,anchorEvents:r}}function Mt(e,n){const o=C(null);let l;function t(s,c){const r=`${c!==void 0?"add":"remove"}EventListener`,d=c!==void 0?c:l;s!==window&&s[r]("scroll",d,ae.passive),window[r]("scroll",d,ae.passive),l=c}function a(){o.value!==null&&(t(o.value),o.value=null)}const i=B(()=>e.noParentEvent,()=>{o.value!==null&&(a(),n())});return ie(i),{localScrollTarget:o,unconfigureScrollTarget:a,changeScrollEvent:t}}const{notPassiveCapture:G}=ae,D=[];function N(e){const n=e.target;if(n===void 0||n.nodeType===8||n.classList.contains("no-pointer-events")===!0)return;let o=he.length-1;for(;o>=0;){const l=he[o].$;if(l.type.name!=="QDialog")break;if(l.props.seamless!==!0)return;o--}for(let l=D.length-1;l>=0;l--){const t=D[l];if((t.anchorEl.value===null||t.anchorEl.value.contains(n)===!1)&&(n===document.body||t.innerRef.value!==null&&t.innerRef.value.contains(n)===!1))e.qClickOutside=!0,t.onClickOutside(e);else return}}function It(e){D.push(e),D.length===1&&(document.addEventListener("mousedown",N,G),document.addEventListener("touchstart",N,G))}function ye(e){const n=D.findIndex(o=>o===e);n>-1&&(D.splice(n,1),D.length===0&&(document.removeEventListener("mousedown",N,G),document.removeEventListener("touchstart",N,G)))}let xe,we;function Ce(e){const n=e.split(" ");return n.length!==2?!1:["top","center","bottom"].includes(n[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(n[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function Ht(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const le={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{le[`${e}#ltr`]=e,le[`${e}#rtl`]=e});function ke(e,n){const o=e.split(" ");return{vertical:o[0],horizontal:le[`${o[1]}#${n===!0?"rtl":"ltr"}`]}}function Vt(e,n){let{top:o,left:l,right:t,bottom:a,width:i,height:s}=e.getBoundingClientRect();return n!==void 0&&(o-=n[1],l-=n[0],a+=n[1],t+=n[0],i+=n[0],s+=n[1]),{top:o,bottom:a,height:s,left:l,right:t,width:i,middle:l+(t-l)/2,center:o+(a-o)/2}}function Rt(e,n,o){let{top:l,left:t}=e.getBoundingClientRect();return l+=n.top,t+=n.left,o!==void 0&&(l+=o[1],t+=o[0]),{top:l,bottom:l+1,height:1,left:t,right:t+1,width:1,middle:t,center:l}}function Wt(e){return{top:0,center:e.offsetHeight/2,bottom:e.offsetHeight,left:0,middle:e.offsetWidth/2,right:e.offsetWidth}}function qe(e,n,o){return{top:e[o.anchorOrigin.vertical]-n[o.selfOrigin.vertical],left:e[o.anchorOrigin.horizontal]-n[o.selfOrigin.horizontal]}}function Lt(e){if(A.is.ios===!0&&window.visualViewport!==void 0){const s=document.body.style,{offsetLeft:c,offsetTop:r}=window.visualViewport;c!==xe&&(s.setProperty("--q-pe-left",c+"px"),xe=c),r!==we&&(s.setProperty("--q-pe-top",r+"px"),we=r)}const{scrollLeft:n,scrollTop:o}=e.el,l=e.absoluteOffset===void 0?Vt(e.anchorEl,e.cover===!0?[0,0]:e.offset):Rt(e.anchorEl,e.absoluteOffset,e.offset);let t={maxHeight:e.maxHeight,maxWidth:e.maxWidth,visibility:"visible"};(e.fit===!0||e.cover===!0)&&(t.minWidth=l.width+"px",e.cover===!0&&(t.minHeight=l.height+"px")),Object.assign(e.el.style,t);const a=Wt(e.el);let i=qe(l,a,e);if(e.absoluteOffset===void 0||e.offset===void 0)oe(i,l,a,e.anchorOrigin,e.selfOrigin);else{const{top:s,left:c}=i;oe(i,l,a,e.anchorOrigin,e.selfOrigin);let r=!1;if(i.top!==s){r=!0;const d=2*e.offset[1];l.center=l.top-=d,l.bottom-=d+2}if(i.left!==c){r=!0;const d=2*e.offset[0];l.middle=l.left-=d,l.right-=d+2}r===!0&&(i=qe(l,a,e),oe(i,l,a,e.anchorOrigin,e.selfOrigin))}t={top:i.top+"px",left:i.left+"px"},i.maxHeight!==void 0&&(t.maxHeight=i.maxHeight+"px",l.height>i.maxHeight&&(t.minHeight=t.maxHeight)),i.maxWidth!==void 0&&(t.maxWidth=i.maxWidth+"px",l.width>i.maxWidth&&(t.minWidth=t.maxWidth)),Object.assign(e.el.style,t),e.el.scrollTop!==o&&(e.el.scrollTop=o),e.el.scrollLeft!==n&&(e.el.scrollLeft=n)}function oe(e,n,o,l,t){const a=o.bottom,i=o.right,s=rt(),c=window.innerHeight-s,r=document.body.clientWidth;if(e.top<0||e.top+a>c)if(t.vertical==="center")e.top=n[l.vertical]>c/2?Math.max(0,c-a):0,e.maxHeight=Math.min(a,c);else if(n[l.vertical]>c/2){const d=Math.min(c,l.vertical==="center"?n.center:l.vertical===t.vertical?n.bottom:n.top);e.maxHeight=Math.min(a,d),e.top=Math.max(0,d-a)}else e.top=Math.max(0,l.vertical==="center"?n.center:l.vertical===t.vertical?n.top:n.bottom),e.maxHeight=Math.min(a,c-e.top);if(e.left<0||e.left+i>r)if(e.maxWidth=Math.min(i,r),t.horizontal==="middle")e.left=n[l.horizontal]>r/2?Math.max(0,r-i):0;else if(n[l.horizontal]>r/2){const d=Math.min(r,l.horizontal==="middle"?n.middle:l.horizontal===t.horizontal?n.right:n.left);e.maxWidth=Math.min(i,d),e.left=Math.max(0,d-e.maxWidth)}else e.left=Math.max(0,l.horizontal==="middle"?n.middle:l.horizontal===t.horizontal?n.left:n.right),e.maxWidth=Math.min(i,r-e.left)}var Me=E({name:"QMenu",inheritAttrs:!1,props:{...Oe,...ut,...ue,..._e,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:Ce},self:{type:String,validator:Ce},offset:{type:Array,validator:Ht},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...st,"click","escapeKey"],setup(e,{slots:n,emit:o,attrs:l}){let t=null,a,i,s;const c=I(),{proxy:r}=c,{$q:d}=r,f=C(null),b=C(!1),u=g(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),v=re(e,d),{registerTick:y,removeTick:k}=ct(),{registerTimeout:T}=dt(),{transitionProps:P,transitionStyle:x}=ft(e),{localScrollTarget:m,changeScrollEvent:K,unconfigureScrollTarget:X}=Mt(e,fe),{anchorEl:S,canShow:Y}=Ae({showing:b}),{hide:W}=vt({showing:b,canShow:Y,handleShow:Re,handleHide:We,hideOnRouteChange:u,processOnMount:!0}),{showPortal:L,hidePortal:$,renderPortal:p}=ht(c,f,$e,"menu"),q={anchorEl:S,innerRef:f,onClickOutside(h){if(e.persistent!==!0&&b.value===!0)return W(h),(h.type==="touchstart"||h.target.classList.contains("q-dialog__backdrop"))&&R(h),!0}},H=g(()=>ke(e.anchor||(e.cover===!0?"center middle":"bottom start"),d.lang.rtl)),Ie=g(()=>e.cover===!0?H.value:ke(e.self||"top start",d.lang.rtl)),He=g(()=>(e.square===!0?" q-menu--square":"")+(v.value===!0?" q-menu--dark q-dark":"")),Ve=g(()=>e.autoClose===!0?{onClick:Le}:{}),ce=g(()=>b.value===!0&&e.persistent!==!0);B(ce,h=>{h===!0?(pt(J),It(q)):(me(J),ye(q))});function U(){yt(()=>{let h=f.value;h&&h.contains(document.activeElement)!==!0&&(h=h.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||h.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||h.querySelector("[autofocus], [data-autofocus]")||h,h.focus({preventScroll:!0}))})}function Re(h){if(t=e.noRefocus===!1?document.activeElement:null,mt(ve),L(),fe(),a=void 0,h!==void 0&&(e.touchPosition||e.contextMenu)){const Z=j(h);if(Z.left!==void 0){const{top:ze,left:Fe}=S.value.getBoundingClientRect();a={left:Z.left-Fe,top:Z.top-ze}}}i===void 0&&(i=B(()=>d.screen.width+"|"+d.screen.height+"|"+e.self+"|"+e.anchor+"|"+d.lang.rtl,V)),e.noFocus!==!0&&document.activeElement.blur(),y(()=>{V(),e.noFocus!==!0&&U()}),T(()=>{d.platform.is.ios===!0&&(s=e.autoClose,f.value.click()),V(),L(!0),o("show",h)},e.transitionDuration)}function We(h){k(),$(),de(!0),t!==null&&(h===void 0||h.qClickOutside!==!0)&&(((h&&h.type.indexOf("key")===0?t.closest('[tabindex]:not([tabindex^="-"])'):void 0)||t).focus(),t=null),T(()=>{$(!0),o("hide",h)},e.transitionDuration)}function de(h){a=void 0,i!==void 0&&(i(),i=void 0),(h===!0||b.value===!0)&&(gt(ve),X(),ye(q),me(J)),h!==!0&&(t=null)}function fe(){(S.value!==null||e.scrollTarget!==void 0)&&(m.value=bt(S.value,e.scrollTarget),K(m.value,V))}function Le(h){s!==!0?(xt(r,h),o("click",h)):s=!1}function ve(h){ce.value===!0&&e.noFocus!==!0&&Ke(f.value,h.target)!==!0&&U()}function J(h){o("escapeKey"),W(h)}function V(){const h=f.value;h===null||S.value===null||Lt({el:h,offset:e.offset,anchorEl:S.value,anchorOrigin:H.value,selfOrigin:Ie.value,absoluteOffset:a,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function $e(){return w(ot,P.value,()=>b.value===!0?w("div",{role:"menu",...l,ref:f,tabindex:-1,class:["q-menu q-position-engine scroll"+He.value,l.class],style:[l.style,x.value],...Ve.value},_(n.default)):null)}return ie(de),Object.assign(r,{focus:U,updatePosition:V}),p}}),nn=E({name:"QPopupProxy",props:{...Oe,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:n,emit:o,attrs:l}){const{proxy:t}=I(),{$q:a}=t,i=C(!1),s=C(null),c=g(()=>parseInt(e.breakpoint,10)),{canShow:r}=Ae({showing:i});function d(){return a.screen.width<c.value||a.screen.height<c.value?"dialog":"menu"}const f=C(d()),b=g(()=>f.value==="menu"?{maxHeight:"99vh"}:{});B(()=>d(),y=>{i.value!==!0&&(f.value=y)});function u(y){i.value=!0,o("show",y)}function v(y){i.value=!1,f.value=d(),o("hide",y)}return Object.assign(t,{show(y){r(y)===!0&&s.value.show(y)},hide(y){s.value.hide(y)},toggle(y){s.value.toggle(y)}}),at(t,"currentComponent",()=>({type:f.value,ref:s.value})),()=>{const y={ref:s,...b.value,...l,onShow:u,onHide:v};let k;return f.value==="dialog"?k=wt:(k=Me,Object.assign(y,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),w(k,y,n.default)}}});const $t=w("div",{key:"svg",class:"q-checkbox__bg absolute"},[w("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[w("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),w("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]);var on=E({name:"QCheckbox",props:Bt,emits:Tt,setup(e){function n(o,l){const t=g(()=>(o.value===!0?e.checkedIcon:l.value===!0?e.indeterminateIcon:e.uncheckedIcon)||null);return()=>t.value!==null?[w("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[w(Se,{class:"q-checkbox__icon",name:t.value})])]:[$t]}return Pt("checkbox",n)}});const an=Be("config",{id:"config",state:()=>({configDb:null,syncing:!1}),actions:{activateSync(e){const n=`kaboome_${e}_config`;PouchDB.sync(document.location.origin+n,n,{live:!0},()=>{}).on("denied",function(){this.syncing=!1}).on("error",function(){this.syncing=!1}),this.syncing=!0,this.configDb=new PouchDB(n)},registerChangesHandler(e){this.configDb.changes({since:"now",live:!0,include_docs:!0}).on("change",()=>{e()})},loadGoogleAccounts:async function(){const e=[];return await this.configDb.allDocs({include_docs:!0,descending:!0},function(n,o){o.rows.forEach(l=>{e.push({label:l.id,children:l.doc.GoogleCalendarConfigs.map(t=>{var a;return{label:t.GoogleCalendarPath.GoogleCalendarId,icon:"calendar_month",doc:l.doc,shouldSync:t.ShouldSync,SyncFromCalendars:(a=t.SyncFromCalendars)!=null?a:[]}})})})}),e}}});var ln=E({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(e,{slots:n}){const o=g(()=>parseInt(e.lines,10)),l=g(()=>"q-item__label"+(e.overline===!0?" q-item__label--overline text-overline":"")+(e.caption===!0?" q-item__label--caption text-caption":"")+(e.header===!0?" q-item__label--header":"")+(o.value===1?" ellipsis":"")),t=g(()=>e.lines!==void 0&&o.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":o.value}:null);return()=>w("div",{style:t.value,class:l.value},_(n.default))}}),rn=E({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:n}){const o=g(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>w("div",{class:o.value},_(n.default))}}),un=E({name:"QItem",props:{...ue,...Xe,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:n,emit:o}){const{proxy:{$q:l}}=I(),t=re(e,l),{hasLink:a,linkAttrs:i,linkClass:s,linkTag:c,navigateOnClick:r}=Ye(),d=C(null),f=C(null),b=g(()=>e.clickable===!0||a.value===!0||e.tag==="label"),u=g(()=>e.disable!==!0&&b.value===!0),v=g(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(t.value===!0?" q-item--dark":"")+(a.value===!0&&e.active===null?s.value:e.active===!0?` q-item--active${e.activeClass!==void 0?` ${e.activeClass}`:""}`:"")+(e.disable===!0?" disabled":"")+(u.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),y=g(()=>{if(e.insetLevel===void 0)return null;const x=l.lang.rtl===!0?"Right":"Left";return{["padding"+x]:16+e.insetLevel*56+"px"}});function k(x){u.value===!0&&(f.value!==null&&(x.qKeyEvent!==!0&&document.activeElement===d.value?f.value.focus():document.activeElement===f.value&&d.value.focus()),r(x))}function T(x){if(u.value===!0&&Te(x,13)===!0){R(x),x.qKeyEvent=!0;const m=new MouseEvent("click",x);m.qKeyEvent=!0,d.value.dispatchEvent(m)}o("keyup",x)}function P(){const x=Ue(n.default,[]);return u.value===!0&&x.unshift(w("div",{class:"q-focus-helper",tabindex:-1,ref:f})),x}return()=>{const x={ref:d,class:v.value,style:y.value,role:"listitem",onClick:k,onKeyup:T};return u.value===!0?(x.tabindex=e.tabindex||"0",Object.assign(x,i.value)):b.value===!0&&(x["aria-disabled"]="true"),w(c.value,x,P())}}}),zt=E({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:n}){const o=g(()=>{const l=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(t=>e[t]===!0).map(t=>`q-btn-group--${t}`).join(" ");return`q-btn-group row no-wrap${l.length>0?" "+l:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>w("div",{class:o.value},_(n.default))}});const Ft=Object.keys(Ee),Qt=e=>Ft.reduce((n,o)=>{const l=e[o];return l!==void 0&&(n[o]=l),n},{});var sn=E({name:"QBtnDropdown",props:{...Ee,..._e,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:n,emit:o}){const{proxy:l}=I(),t=C(e.modelValue),a=C(null),i=Ct(),s=g(()=>{const m={"aria-expanded":t.value===!0?"true":"false","aria-haspopup":"true","aria-controls":i,"aria-label":e.toggleAriaLabel||l.$q.lang.label[t.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(m["aria-disabled"]="true"),m}),c=g(()=>"q-btn-dropdown__arrow"+(t.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),r=g(()=>Je(e)),d=g(()=>Qt(e));B(()=>e.modelValue,m=>{a.value!==null&&a.value[m?"show":"hide"]()}),B(()=>e.split,x);function f(m){t.value=!0,o("beforeShow",m)}function b(m){o("show",m),o("update:modelValue",!0)}function u(m){t.value=!1,o("beforeHide",m)}function v(m){o("hide",m),o("update:modelValue",!1)}function y(m){o("click",m)}function k(m){z(m),x(),o("click",m)}function T(m){a.value!==null&&a.value.toggle(m)}function P(m){a.value!==null&&a.value.show(m)}function x(m){a.value!==null&&a.value.hide(m)}return Object.assign(l,{show:P,hide:x,toggle:T}),Pe(()=>{e.modelValue===!0&&P()}),()=>{const m=[w(Se,{class:c.value,name:e.dropdownIcon||l.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&m.push(w(Me,{ref:a,id:i,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:f,onShow:b,onBeforeHide:u,onHide:v},n.default)),e.split===!1?w(ee,{class:"q-btn-dropdown q-btn-dropdown--simple",...d.value,...s.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:y},{default:()=>_(n.label,[]).concat(m),loading:n.loading}):w(zt,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...r.value,glossy:e.glossy,stretch:e.stretch},()=>[w(ee,{class:"q-btn-dropdown--current",...d.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:k},{default:n.label,loading:n.loading}),w(ee,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...s.value,...r.value,disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},()=>m)])}}});export{on as Q,Yt as T,Tt as a,Jt as b,Pt as c,tn as d,sn as e,un as f,rn as g,ln as h,an as i,nn as j,Xt as k,Kt as l,Ut as m,Zt as n,Me as o,en as p,Bt as u,_t as w};
